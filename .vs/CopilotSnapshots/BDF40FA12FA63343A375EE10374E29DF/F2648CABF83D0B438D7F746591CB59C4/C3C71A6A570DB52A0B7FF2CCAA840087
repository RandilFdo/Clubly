

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace ClubManager
{
    public partial class MainMenu : Form
    {
        //Fields
        private Button? currentButton;
        private Random random;
        private Form? activeForm;
        private string userId;
        private string clubId;
        private Color primaryColor;

        //Panels for different sections
        private Panel panelMyClubs;
        private Panel panelMyTasks;
        private Panel panelMyCalendar;
        private Panel panelMyDues;
        private Panel panelSettings;


        //Constructor
        public MainMenu(string userId, string clubId)
        {
            InitializeComponent();
            random = new Random();
            this.Text = string.Empty;
            this.ControlBox = false;
            this.MaximizedBounds = Screen.FromHandle(this.Handle).WorkingArea;
            
            this.userId = userId;
            this.clubId = clubId; // Note: This might represent the last-viewed club or be less relevant in a multi-club view.

            // TODO: Fetch user's theme preference from the database
            this.primaryColor = ColorTranslator.FromHtml("#7c3aed"); // Default to Violet

            InitializePanels();
            ApplyTheme(this.primaryColor);
            OpenPanel(panelMyClubs, "My Clubs"); // Show "My Clubs" by default

            if (btnMyClubs != null)
            {
                ActivateButton(btnMyClubs); // Activate the button visually
            }
            else
            {
                MessageBox.Show("Error: btnMyClubs is null after initialization.", "Initialization Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }

        [DllImport("user32.DLL", EntryPoint = "ReleaseCapture")]
        private extern static void ReleaseCapture();

        [DllImport("user32.DLL", EntryPoint = "SendMessage")]
        private extern static void SendMessage(System.IntPtr hWnd, int wMsg, int wParam, int lParam);

        //Methods

        

                private void InitializePanels()

                {

                    // Initialize and configure all the panels that will be used as workspaces.

                    panelMyClubs = new Panel { Dock = DockStyle.Fill, BackColor = Color.White };
                    panelDesktop.Controls.Add(panelMyClubs);

                    panelMyTasks = new Panel { Dock = DockStyle.Fill, BackColor = Color.White, Visible = false };
                    panelDesktop.Controls.Add(panelMyTasks);

                    panelMyCalendar = new Panel { Dock = DockStyle.Fill, BackColor = Color.White, Visible = false };
                    panelDesktop.Controls.Add(panelMyCalendar);

                    panelMyDues = new Panel { Dock = DockStyle.Fill, BackColor = Color.White, Visible = false };
                    panelDesktop.Controls.Add(panelMyDues);

                    panelSettings = new Panel { Dock = DockStyle.Fill, BackColor = Color.White, Visible = false };
                    panelDesktop.Controls.Add(panelSettings);

        

                    

        

                                

        

                    

        

                                            // Build the panel UIs

        

                    

        

                                            InitializeMyClubsPanel();

        

                    

        

                                            

        

                    

        

                                                        InitializeMyTasksPanel();

        

                    

        

                                                        

        

                    

        

                                                                    InitializeMyCalendarPanel();

        

                    

        

                                                                    InitializeMyDuesPanel();

        

                    

        

                                                                    InitializeSettingsPanel();

        

                    

        

                                                        

        

                    

        

                                            

        

                    

        

                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    private void InitializeMyDuesPanel()

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyDues.Controls.Clear(); // Remove placeholder

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyDues.Padding = new Padding(10);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- KPI Cards ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Panel kpiPanel = new Panel { Dock = DockStyle.Top, Height = 60 };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Label totalPendingLabel = new Label { Font = new Font("Arial", 12, FontStyle.Bold), AutoSize = true, Location = new Point(10, 5) };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Label nextDueLabel = new Label { Font = new Font("Arial", 10), AutoSize = true, Location = new Point(10, 30) };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        kpiPanel.Controls.Add(totalPendingLabel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        kpiPanel.Controls.Add(nextDueLabel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Add New Dues Button ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Button btnAddDues = new Button { Text = "+ Add New Dues", Dock = DockStyle.Top, Height = 40 };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Data Grid ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        DataGridView duesGrid = new DataGridView { Dock = DockStyle.Fill, AutoGenerateColumns = false, AllowUserToAddRows = false };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.ColumnHeadersDefaultCellStyle.Font = new Font("Arial", 10, FontStyle.Bold);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Add Columns ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Club", Name = "ClubName", Width = 150 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Description", Name = "PaymentDescription", AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Amount", Name = "AmountDue", Width = 80 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Due Date", Name = "DueDate", Width = 120 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Status", Name = "Status", Width = 100 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.Columns.Add(new DataGridViewButtonColumn { HeaderText = "Action", Name = "Action", Text = "Mark as Paid", UseColumnTextForButtonValue = true, Width = 120 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyDues.Controls.Add(duesGrid);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyDues.Controls.Add(btnAddDues);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyDues.Controls.Add(kpiPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        LoadDues(duesGrid, totalPendingLabel, nextDueLabel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Event Handlers ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        btnAddDues.Click += (s, e) => MessageBox.Show("This will open a form to add new dues.");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.CellFormatting += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            if (e.RowIndex >= 0 && duesGrid.Rows[e.RowIndex].DataBoundItem is Dues due)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                if (due.Status == "Pending" && due.DueDate < DateTime.Now)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    e.CellStyle.ForeColor = Color.Red;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    e.CellStyle.Font = new Font(e.CellStyle.Font, FontStyle.Bold);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        duesGrid.CellContentClick += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            if (e.ColumnIndex == duesGrid.Columns["Action"].Index && e.RowIndex >= 0)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var row = duesGrid.Rows[e.RowIndex];

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var due = (Dues)row.DataBoundItem;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                if (due.Status == "Pending")

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    // TODO: Update database status to 'Paid' for due.Id

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    due.Status = "Paid";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    row.Cells["Status"].Value = "Paid";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    row.DefaultCellStyle.ForeColor = Color.Gray;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    ((DataGridViewButtonCell)row.Cells["Action"]).Value = "Paid";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    ((DataGridViewButtonCell)row.Cells["Action"]).FlatStyle = FlatStyle.Flat;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    row.Cells["Action"].ReadOnly = true;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    // Recalculate KPIs

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    var duesList = ((BindingList<Dues>)duesGrid.DataSource).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    UpdateDuesKpis(duesList, totalPendingLabel, nextDueLabel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    private void LoadDues(DataGridView grid, Label totalPendingLabel, Label nextDueLabel)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // TODO: Fetch all dues for the user from the database

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        var dues = new List<Dues>

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Dues("due1", "IEEE RAS", "Annual Membership", 75.00m, DateTime.Now.AddDays(-5), "Pending"),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Dues("due2", "Toastmasters", "6-Month Dues", 60.00m, DateTime.Now.AddDays(12), "Pending"),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Dues("due3", "Rotaract Club", "Donation Drive", 25.00m, DateTime.Now.AddDays(20), "Pending"),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Dues("due4", "IEEE RAS", "Conference Fee", 150.00m, DateTime.Now.AddMonths(-2), "Paid"),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.DataSource = new BindingList<Dues>(dues.OrderBy(d => d.DueDate).ToList());

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.Columns["ClubName"].DataPropertyName = "ClubName";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.Columns["PaymentDescription"].DataPropertyName = "PaymentDescription";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.Columns["AmountDue"].DataPropertyName = "AmountDue";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.Columns["DueDate"].DataPropertyName = "DueDate";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        grid.Columns["Status"].DataPropertyName = "Status";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        UpdateDuesKpis(dues, totalPendingLabel, nextDueLabel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    private void UpdateDuesKpis(List<Dues> dues, Label totalPendingLabel, Label nextDueLabel)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        var pendingDues = dues.Where(d => d.Status == "Pending").ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        decimal totalPending = pendingDues.Sum(d => d.AmountDue);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        totalPendingLabel.Text = $"Total Dues Pending: {totalPending:C}";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        var nextDue = pendingDues.OrderBy(d => d.DueDate).FirstOrDefault();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        if (nextDue != null)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            nextDueLabel.Text = $"Next Due: {nextDue.DueDate.ToShortDateString()} ({nextDue.ClubName})";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        else

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            nextDueLabel.Text = "No pending dues.";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            
                                                    private GraphicsPath GetRoundedRect(RectangleF rect, float radius)
                                                    {
                                                        GraphicsPath path = new GraphicsPath();
                                                        path.StartFigure();
                                                        path.AddArc(rect.X, rect.Y, radius * 2, radius * 2, 180, 90);
                                                        path.AddArc(rect.Right - radius * 2, rect.Y, radius * 2, radius * 2, 270, 90);
                                                        path.AddArc(rect.Right - radius * 2, rect.Bottom - radius * 2, radius * 2, radius * 2, 0, 90);
                                                        path.AddArc(rect.X, rect.Bottom - radius * 2, radius * 2, radius * 2, 90, 90);
                                                        path.CloseFigure();
                                                        return path;
                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            
                                                    private void InitializeMyCalendarPanel()

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                panelMyCalendar.Controls.Clear(); // Remove placeholder

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                panelMyCalendar.Padding = new Padding(10);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                TableLayoutPanel calendarLayout = new TableLayoutPanel { Dock = DockStyle.Fill };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.ColumnCount = 2;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.RowCount = 2;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Absolute, 260F)); // For calendar and toggles

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100F)); // For event list

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.RowStyles.Add(new RowStyle(SizeType.Absolute, 200F)); // For calendar

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.RowStyles.Add(new RowStyle(SizeType.Percent, 100F)); // For club toggles and add event button

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                MonthCalendar calendar = new MonthCalendar { Dock = DockStyle.Fill };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                ListBox eventsList = new ListBox { Dock = DockStyle.Fill };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                Button btnAddEvent = new Button { Text = "+ Add Event/Meeting", Dock = DockStyle.Bottom, Height = 40, Font = new Font("Arial", 10, FontStyle.Bold) };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                FlowLayoutPanel clubTogglesPanel = new FlowLayoutPanel { Dock = DockStyle.Fill, AutoScroll = true, FlowDirection = FlowDirection.TopDown };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                clubTogglesPanel.Controls.Add(new Label { Text = "Toggle Clubs:", AutoSize = true, Font = new Font("Arial", 9, FontStyle.Bold) });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.Controls.Add(calendar, 0, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.Controls.Add(eventsList, 1, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.SetRowSpan(eventsList, 2);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.Controls.Add(clubTogglesPanel, 0, 1);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.Controls.Add(btnAddEvent, 0, 1);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendarLayout.SetRowSpan(btnAddEvent, 1);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                btnAddEvent.BringToFront();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                panelMyCalendar.Controls.Add(calendarLayout);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var allEvents = LoadCalendarEvents(calendar);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                // Populate club toggles

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var distinctClubs = allEvents.Select(e => e.ClubName).Distinct().ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                foreach (var clubName in distinctClubs)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    CheckBox cb = new CheckBox { Text = clubName, Tag = clubName, Checked = true, AutoSize = true };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    cb.CheckedChanged += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        UpdateEventList(calendar, eventsList, allEvents, clubTogglesPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    clubTogglesPanel.Controls.Add(cb);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                // Event Handlers

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                calendar.DateChanged += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    UpdateEventList(calendar, eventsList, allEvents, clubTogglesPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                eventsList.DoubleClick += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    if (eventsList.SelectedItem is CalendarEvent selectedEvent)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        MessageBox.Show($"Title: {selectedEvent.Title}\nClub: {selectedEvent.ClubName}\nDate: {selectedEvent.StartDate}\nLocation: {selectedEvent.Location}", "Event Details");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                btnAddEvent.Click += (s, e) => MessageBox.Show("This will open a form to add a new event.");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                // Initial load for the current day

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                UpdateEventList(calendar, eventsList, allEvents, clubTogglesPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            private void UpdateEventList(MonthCalendar calendar, ListBox eventsList, List<CalendarEvent> allEvents, FlowLayoutPanel clubTogglesPanel)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var selectedDate = calendar.SelectionStart.Date;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var activeClubs = clubTogglesPanel.Controls.OfType<CheckBox>().Where(cb => cb.Checked).Select(cb => cb.Text).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                var eventsForDay = allEvents.Where(ev => ev.StartDate.Date == selectedDate && activeClubs.Contains(ev.ClubName)).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                eventsList.DataSource = eventsForDay;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            private List<CalendarEvent> LoadCalendarEvents(MonthCalendar calendar)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // TODO: Fetch all events for the user from the database

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                var events = new List<CalendarEvent>

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    new CalendarEvent("Weekly Meeting", DateTime.Now.AddDays(2).AddHours(18), "Toastmasters", "Online", Color.SkyBlue),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    new CalendarEvent("Project Demo Day", DateTime.Now.AddDays(7), "IEEE RAS", "Main Auditorium", Color.LightCoral),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    new CalendarEvent("Community Cleanup", DateTime.Now.AddDays(5), "Rotaract Club", "City Park", Color.LightGreen),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    new CalendarEvent("Personal: Dentist", DateTime.Now.AddDays(3), "Personal", "Dr. Smith's Office", Color.LightGray),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                calendar.BoldedDates = events.Select(e => e.StartDate.Date).Distinct().ToArray();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                return events;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    private void InitializeMyTasksPanel()

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyTasks.Controls.Clear(); // Remove placeholder

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyTasks.Padding = new Padding(10);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Filter Bar ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        TableLayoutPanel filterLayout = new TableLayoutPanel { Dock = DockStyle.Top, Height = 40 };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.ColumnCount = 4;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 30F));

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 30F));

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 20F));

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 20F));

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        ComboBox clubFilter = new ComboBox { DropDownStyle = ComboBoxStyle.DropDownList, Dock = DockStyle.Fill };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        ComboBox dateFilter = new ComboBox { DropDownStyle = ComboBoxStyle.DropDownList, Dock = DockStyle.Fill };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Button btnAddTask = new Button { Text = "+ Add New Task", Dock = DockStyle.Fill, Font = new Font("Arial", 10, FontStyle.Bold) };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Label filterByClubLabel = new Label { Text = "Filter by Club:", AutoSize = true, Anchor = AnchorStyles.Right, TextAlign = ContentAlignment.MiddleRight };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Label filterByDateLabel = new Label { Text = "Filter by Due Date:", AutoSize = true, Anchor = AnchorStyles.Right, TextAlign = ContentAlignment.MiddleRight };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.Controls.Add(filterByClubLabel, 0, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.Controls.Add(clubFilter, 1, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.Controls.Add(filterByDateLabel, 2, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        filterLayout.Controls.Add(dateFilter, 3, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        Panel topPanel = new Panel { Dock = DockStyle.Top, Height = 40 };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        topPanel.Controls.Add(btnAddTask);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        btnAddTask.Dock = DockStyle.Right;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Data Grid ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        DataGridView tasksGrid = new DataGridView { Dock = DockStyle.Fill, AutoGenerateColumns = false, AllowUserToAddRows = false, ReadOnly = true };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.ColumnHeadersDefaultCellStyle.Font = new Font("Arial", 10, FontStyle.Bold);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.AlternatingRowsDefaultCellStyle.BackColor = Color.LightGray;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Add Columns ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.Columns.Add(new DataGridViewCheckBoxColumn { HeaderText = "Done", Name = "IsCompleted", Width = 50 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Description", Name = "Description", AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Club", Name = "ClubName", Width = 120 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Due Date", Name = "DueDate", Width = 120 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.Columns.Add(new DataGridViewTextBoxColumn { HeaderText = "Priority", Name = "Priority", Width = 80 });

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyTasks.Controls.Add(tasksGrid);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyTasks.Controls.Add(filterLayout);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panelMyTasks.Controls.Add(topPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        LoadTasks(tasksGrid, clubFilter, dateFilter);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Event Handlers ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        btnAddTask.Click += (s, e) => MessageBox.Show("This will open a form to add a new task.");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        tasksGrid.CellContentClick += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            if (e.ColumnIndex == tasksGrid.Columns["IsCompleted"].Index && e.RowIndex >= 0)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                DataGridViewRow row = tasksGrid.Rows[e.RowIndex];

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                bool isChecked = (bool)row.Cells["IsCompleted"].Value;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                // The click event fires before the value is updated, so the logic is inverted.

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                if (!isChecked)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    var task = (UserTask)row.DataBoundItem;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    // TODO: Execute an UPDATE on the database to set task status to 'Completed' for task.Id

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    MessageBox.Show($"Task '{(task.Description)}' marked as complete!");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    tasksGrid.Rows.RemoveAt(e.RowIndex); // Remove from UI

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    private void LoadTasks(DataGridView grid, ComboBox clubFilter, ComboBox dateFilter)

        

                    

        

                                

        

                    

        

                                    {

        

                    

        

                                

        

                    

        

                                        // TODO: Fetch all PENDING tasks for the current user from the database

        

                    

        

                                

        

                    

        

                                        var tasks = new List<UserTask>

        

                    

        

                                

        

                    

        

                                        {

        

                    

        

                                

        

                    

        

                                            new UserTask("task1", "Prepare speech for weekly meeting", DateTime.Now.AddDays(2), "High", "Toastmasters"),

        

                    

        

                                

        

                    

        

                                            new UserTask("task2", "Submit project proposal", DateTime.Now.AddDays(-1), "High", "IEEE RAS"),

        

                    

        

                                

        

                    

        

                                            new UserTask("task3", "Pay membership fee", DateTime.Now.AddDays(10), "Medium", "IEEE RAS"),

        

                    

        

                                

        

                    

        

                                            new UserTask("task4", "Organize volunteer schedule", DateTime.Now, "Low", "Rotaract Club"),

        

                    

        

                                

        

                    

        

                                            new UserTask("task5", "Follow up with Leo club president", DateTime.Now.AddDays(6), "Medium", "Rotaract Club"),

        

                    

        

                                

        

                    

        

                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                        grid.DataSource = new BindingList<UserTask>(tasks.OrderBy(t => t.DueDate).ToList());

        

                    

        

                                

        

                    

        

                                        grid.Columns["Description"].DataPropertyName = "Description";

        

                    

        

                                

        

                    

        

                                        grid.Columns["ClubName"].DataPropertyName = "ClubName";

        

                    

        

                                

        

                    

        

                                        grid.Columns["DueDate"].DataPropertyName = "DueDate";

        

                    

        

                                

        

                    

        

                                        grid.Columns["Priority"].DataPropertyName = "Priority";

        

                    

        

                                

        

                    

        

                                        grid.Columns["IsCompleted"].DataPropertyName = "IsCompleted";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                        // Populate filters

        

                    

        

                                

        

                    

        

                                        clubFilter.Items.Add("All Clubs");

        

                    

        

                                

        

                    

        

                                        clubFilter.Items.AddRange(tasks.Select(t => t.ClubName).Distinct().ToArray());

        

                    

        

                                

        

                    

        

                                        clubFilter.SelectedIndex = 0;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                        dateFilter.Items.AddRange(new string[] { "All Dates", "Overdue", "Today", "Next 7 Days" });

        

                    

        

                                

        

                    

        

                                        dateFilter.SelectedIndex = 0;

        

                    

        

                                

        

                    

        

                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            private void InitializeMyClubsPanel()

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                panelMyClubs.Controls.Clear();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                panelMyClubs.Padding = new Padding(20);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // --- Top Bar (Search, Sort, Add) ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                TableLayoutPanel topBar = new TableLayoutPanel

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    Dock = DockStyle.Top,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    Height = 40,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    ColumnCount = 4,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    RowCount = 1,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    Padding = new Padding(0, 0, 0, 10)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.ColumnStyles.Add(new ColumnStyle(SizeType.Absolute, 250F)); // Search

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.ColumnStyles.Add(new ColumnStyle(SizeType.Absolute, 180F)); // Sort

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100F));   // Spacer

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.ColumnStyles.Add(new ColumnStyle(SizeType.Absolute, 150F)); // Add Button

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        // Search Box

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        RJTextBox txtSearch = new RJTextBox

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            PlaceholderText = "Search clubs...",

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Dock = DockStyle.Fill,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Font = new Font("Segoe UI", 10F),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            BorderRadius = 15, // Make it rounded

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Icon = ModernClubCard.CreateSolidColorBitmap(16, 16, Color.Gray), // Placeholder for magnifying glass icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Padding = new Padding(30, 7, 7, 7) // Adjust padding for icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // Sort ComboBox

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            ComboBox cmbSort = new ComboBox

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                DropDownStyle = ComboBoxStyle.DropDownList,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                Dock = DockStyle.Fill,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                Font = new Font("Segoe UI", 10F),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                Items = { "Sort by Next Event", "Sort by Tasks", "Sort Alphabetically" },

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                SelectedIndex = 0,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                FlatStyle = FlatStyle.Flat,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                BackColor = Color.White,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                ForeColor = Color.Black

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // Add Club Button

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        Button btnAddClub = new Button

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Text = " Add New Club", // Add space for icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Dock = DockStyle.Fill,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            Font = new Font("Segoe UI", 10F, FontStyle.Bold),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            BackColor = this.primaryColor,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            ForeColor = Color.White,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            FlatStyle = FlatStyle.Flat,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            FlatAppearance = { BorderSize = 0 }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        // Custom drawing for rounded corners and icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        btnAddClub.Paint += (s, pe) =>

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            pe.Graphics.SmoothingMode = SmoothingMode.AntiAlias;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            RectangleF rect = new RectangleF(0, 0, btnAddClub.Width, btnAddClub.Height);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            using (GraphicsPath path = GetRoundedRect(rect, 15)) // 15 is the border radius

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                pe.Graphics.FillPath(new SolidBrush(btnAddClub.BackColor), path);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                pe.Graphics.DrawString(btnAddClub.Text, btnAddClub.Font, new SolidBrush(btnAddClub.ForeColor), 30, (btnAddClub.Height - btnAddClub.Font.Height) / 2);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                // Draw '+' icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                using (Image plusIcon = ModernClubCard.CreateSolidColorBitmap(16, 16, Color.White))

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                    pe.Graphics.DrawImage(plusIcon, 10, (btnAddClub.Height - plusIcon.Height) / 2, 16, 16);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            // Custom drawing for rounded corners and icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            btnAddClub.Paint += (s, pe) =>

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                pe.Graphics.SmoothingMode = SmoothingMode.AntiAlias;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                RectangleF rect = new RectangleF(0, 0, btnAddClub.Width, btnAddClub.Height);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                using (GraphicsPath path = GetRoundedRect(rect, 15)) // 15 is the border radius

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    pe.Graphics.FillPath(new SolidBrush(btnAddClub.BackColor), path);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    pe.Graphics.DrawString(btnAddClub.Text, btnAddClub.Font, new SolidBrush(btnAddClub.ForeColor), 30, (btnAddClub.Height - btnAddClub.Font.Height) / 2);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    // Draw '+' icon

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    using (Image plusIcon = ModernClubCard.CreateSolidColorBitmap(16, 16, Color.White))

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        pe.Graphics.DrawImage(plusIcon, 10, (btnAddClub.Height - plusIcon.Height) / 2, 16, 16);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            // Helper method for rounded rectangles (needs to be added to MainMenu class)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            // private GraphicsPath GetRoundedRect(RectangleF rect, float radius)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            // {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     GraphicsPath path = new GraphicsPath();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.StartFigure();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.AddArc(rect.X, rect.Y, radius * 2, radius * 2, 180, 90);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.AddArc(rect.Right - radius * 2, rect.Y, radius * 2, radius * 2, 270, 90);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.AddArc(rect.Right - radius * 2, rect.Bottom - radius * 2, radius * 2, radius * 2, 0, 90);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.AddArc(rect.X, rect.Bottom - radius * 2, radius * 2, radius * 2, 90, 90);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     path.CloseFigure();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            //     return path;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            // }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.Controls.Add(txtSearch, 0, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.Controls.Add(cmbSort, 1, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                topBar.Controls.Add(btnAddClub, 3, 0);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // --- Club Cards Panel ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                FlowLayoutPanel clubCardsPanel = new FlowLayoutPanel

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    Dock = DockStyle.Fill,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    AutoScroll = true,

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    Padding = new Padding(0, 10, 0, 0)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                panelMyClubs.Controls.Add(clubCardsPanel);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                panelMyClubs.Controls.Add(topBar);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // --- Event Handlers ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                txtSearch.TextChanged += (s, e) => LoadClubs(clubCardsPanel, txtSearch.Text, cmbSort.SelectedItem.ToString());

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                cmbSort.SelectedIndexChanged += (s, e) => LoadClubs(clubCardsPanel, txtSearch.Text, cmbSort.SelectedItem.ToString());

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                btnAddClub.Click += (s, e) => MessageBox.Show("This will open a form to add a new club.");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                // Initial Load

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                LoadClubs(clubCardsPanel, "", cmbSort.SelectedItem.ToString());

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    private void LoadClubs(FlowLayoutPanel panel, string searchTerm, string sortOption)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        panel.Controls.Clear();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // TODO: Fetch the user's clubs from the database using the `userId`

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        var allClubs = new List<Club>

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Club("club1", "IEEE RAS", "Professional", DateTime.Now.AddDays(7), 3, 1),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Club("club2", "Toastmasters", "Public Speaking", DateTime.Now.AddDays(12), 1, 0),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            new Club("club3", "Rotaract Club", "Volunteer", DateTime.Now.AddDays(5), 5, 2),

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Filtering ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        var filteredClubs = allClubs;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        if (!string.IsNullOrWhiteSpace(searchTerm))

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            filteredClubs = allClubs.Where(c => c.Name.IndexOf(searchTerm, StringComparison.OrdinalIgnoreCase) >= 0).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Sorting ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        switch (sortOption)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            case "Sort by Tasks":

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                filteredClubs = filteredClubs.OrderByDescending(c => c.OutstandingTasks).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                break;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            case "Sort Alphabetically":

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                filteredClubs = filteredClubs.OrderBy(c => c.Name).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                break;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            case "Sort by Next Event":

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                            default:

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                filteredClubs = filteredClubs.OrderBy(c => c.NextEventDate).ToList();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                break;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                            

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        // --- Displaying ---

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    foreach (var club in filteredClubs)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        ModernClubCard card = new ModernClubCard();

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.ClubId = club.Id;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.ClubName = club.Name;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.NextEvent = $"Next Event: {club.NextEventDate.ToShortDateString()}";

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.TasksCount = club.OutstandingTasks;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.DuesCount = club.UnpaidDues;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        // Set accent color based on urgency

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        if (club.NextEventDate < DateTime.Now.AddDays(2) || club.UnpaidDues > 0)

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            card.AccentColor = Color.OrangeRed;

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.Click += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            // Navigate to club dashboard

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            MessageBox.Show($"Navigating to dashboard for {club.Name}");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.TasksClick += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            MessageBox.Show($"Showing tasks for {club.Name}");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            // TODO: Navigate to tasks section for this club

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        card.DuesClick += (s, e) => {

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            MessageBox.Show($"Showing dues for {club.Name}");

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                            // TODO: Navigate to dues section for this club

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        };

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                        

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                        panel.Controls.Add(card);

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                                    }

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                    

        

                    

        

                                

        

                    

        

                            

        

                    

        

                                

        

                    

        

                                                    }

        

                    

        

                            private void InitializeSettingsPanel()

        

                            {

        

                    

                    panelSettings.Controls.Clear(); // Remove placeholder

                    var settingsLabel = new Label { Text = "Personalize - Theme Color", Font = new Font("Arial", 14, FontStyle.Bold), AutoSize = true, Location = new Point(10, 10) };

                    panelSettings.Controls.Add(settingsLabel);

        

                    // Add color swatch buttons

                    var color1 = new Button { BackColor = ColorTranslator.FromHtml("#7c3aed"), Size = new Size(30, 30), Location = new Point(10, 40), Tag = "#7c3aed" }; // Violet

                    var color2 = new Button { BackColor = ColorTranslator.FromHtml("#059669"), Size = new Size(30, 30), Location = new Point(50, 40), Tag = "#059669" }; // Emerald

                    var color3 = new Button { BackColor = ColorTranslator.FromHtml("#312e81"), Size = new Size(30, 30), Location = new Point(90, 40), Tag = "#312e81" }; // Indigo

                    var color4 = new Button { BackColor = ColorTranslator.FromHtml("#db2777"), Size = new Size(30, 30), Location = new Point(130, 40), Tag = "#DB2777" }; // Pink

        

                    panelSettings.Controls.Add(color1);

                    panelSettings.Controls.Add(color2);

                    panelSettings.Controls.Add(color3);

                    panelSettings.Controls.Add(color4);

        

                    // Add event handlers for color buttons

                    Action<object, EventArgs> colorButtonClick = (s, e) => {

                        var btn = (Button)s;

                        this.primaryColor = btn.BackColor;

                        ApplyTheme(this.primaryColor);

                    };

        

                    color1.Click += new EventHandler(colorButtonClick);

                    color2.Click += new EventHandler(colorButtonClick);

                    color3.Click += new EventHandler(colorButtonClick);

                    color4.Click += new EventHandler(colorButtonClick);

        

                    var saveButton = new Button { Text = "Save Preferences", Location = new Point(10, 80), Size = new Size(150, 30) };

                    panelSettings.Controls.Add(saveButton);

        

                    saveButton.Click += (s, e) => {

                        // TODO: Save the selected primaryColor's hex value to the database for the current userId.

                        MessageBox.Show($"Theme color saved! ({ColorTranslator.ToHtml(this.primaryColor)})", "Settings Saved", MessageBoxButtons.OK, MessageBoxIcon.Information);

                    };

                }

        

        

                private void ApplyTheme(Color color)

                {

                    this.primaryColor = color;

                    panelTitleBar.BackColor = primaryColor;

                    panelLogo.BackColor = ThemeColor.ChangeColorBrightness(primaryColor, -0.3);

        

                    if (currentButton != null)

                    {

                        currentButton.BackColor = primaryColor;

                    }

                }

        

                private void ActivateButton(object btnSender)

                {

                    if (btnSender != null)

                    {

                        if (currentButton != (Button)btnSender)

                        {

                            DisableButton();

                            currentButton = (Button)btnSender;

                            currentButton.BackColor = primaryColor;

                            currentButton.ForeColor = Color.White;

                            currentButton.Font = new System.Drawing.Font("Microsoft Sans Serif", 12.5F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));

                        }

                    }

                }

        

                private void DisableButton()

                {

                    foreach (Control previousBtn in panelMenu.Controls)

                    {

                        if (previousBtn.GetType() == typeof(Button))

                        {

                            previousBtn.BackColor = Color.FromArgb(51, 51, 76);

                            previousBtn.ForeColor = Color.Gainsboro;

                            previousBtn.Font = new System.Drawing.Font("Microsoft Sans Serif", 10F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));

                        }

                    }

                }

        

                private void OpenPanel(Panel panelToShow, string title)

                {

                    // Hide all panels

                    panelMyClubs.Visible = false;

                    panelMyTasks.Visible = false;

                    panelMyCalendar.Visible = false;

                    panelMyDues.Visible = false;

                    panelSettings.Visible = false;

        

                    // Show the requested panel

                    panelToShow.Visible = true;

                    lblTitle.Text = title.ToUpper();

                }

        

        private void btnMyClubs_Click(object sender, EventArgs e)
        {
            ActivateButton(sender);
            OpenPanel(panelMyClubs, "My Clubs");
        }

        private void btnMyTasks_Click(object sender, EventArgs e)
        {
            ActivateButton(sender);
            OpenPanel(panelMyTasks, "My Tasks");
        }

        private void btnMyCalendar_Click(object sender, EventArgs e)
        {
            ActivateButton(sender);
            OpenPanel(panelMyCalendar, "My Calendar");
        }

        private void btnMyDues_Click(object sender, EventArgs e)
        {
            ActivateButton(sender);
            OpenPanel(panelMyDues, "My Dues");
        }

        private void btnSettings_Click(object sender, EventArgs e)
        {
            ActivateButton(sender);
            OpenPanel(panelSettings, "Profile & Settings");
        }

        private void btnLogout_Click(object sender, EventArgs e)
        {
            // When logging out, close the main menu and show the login form again.
            this.Close();
            // Find the login form if it exists, or create a new one, and show it.
            LoginForm loginForm = Application.OpenForms.OfType<LoginForm>().FirstOrDefault();
            if (loginForm != null)
            {
                loginForm.Show();
            }
            else
            {
                new LoginForm().Show();
            }
        }

        private void Reset()
        {
            DisableButton();
            lblTitle.Text = "HOME";
            panelTitleBar.BackColor = primaryColor;
            panelLogo.BackColor = ThemeColor.ChangeColorBrightness(primaryColor, -0.3);
            currentButton = null;
        }

        private void panelTitleBar_MouseDown(object sender, MouseEventArgs e)
        {
            ReleaseCapture();
            SendMessage(this.Handle, 0x112, 0xf012, 0);
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void btnMaximize_Click(object sender, EventArgs e)
        {
            if (WindowState == FormWindowState.Normal)
                this.WindowState = FormWindowState.Maximized;
            else
                this.WindowState = FormWindowState.Normal;
        }

        private void bntMinimize_Click(object sender, EventArgs e)
        {
            this.WindowState = FormWindowState.Minimized;
        }
    }
}
